<!-- Practice / Users block -->
<div class="row">
    <div class="input-block col-xs-12 col-sm-6">
        <div class="block-title">
            <h2>Practice</h2>
            <i ng-show="loadingPractices" class="glyphicon glyphicon-refresh btn-toggle btn"></i>
            <div ng-show="noResults" class="btn-toggle btn">
                <i class="glyphicon glyphicon-remove"></i> No Results Found
            </div>
        </div>
        <input type="text" class="form-control" name="practice" placeholder="Enter existing practice..." ng-model-options="{ debounce: 300 }"
               ng-model="practiceSearch" typeahead-loading="loadingPractices" typeahead-no-results="noResults" typeahead-editable="false"
               typeahead-on-select="onPracticeSelected($item, $model, $label)"
               typeahead="practice as (practice.name == '-- pending registration --') ?
               (practice.users[0].last_name == null && practice.users[0].first_name == null ? practice.users[0].email :
               (practice.users[0].first_name + ' ' + practice.users[0].last_name)) : practice.name for practice in findPractice($viewValue)">
    </div>

    <div class="input-block col-xs-12 col-sm-6">
        <div class="block-title">
            <h2>Users</h2>
            <button ng-disabled="!destinationPractice || destinationPractice.isInvitation" type="button" ng-click="usersDialog()" class="btn btn-orange btn-toggle btn-toggle-modal-user"
                    data-toggle="tooltip" data-placement="top" title="Add a New User" data-target="#modalUser"><span class="dlicons-user-add"></span></button>
        </div>
        <select id="selectUsers" name="user" class="form-control" ng-disabled="!destinationPractice" ng-model="practiceUser"
                ng-options="u as u.first_name && u.last_name ?
                    u.first_name + ' ' + u.last_name : u.email for u in destinationPractice.users" ng-required="true">
            <option  class="placeholder" value="">Choose a user &hellip;</option>
        </select>
    </div>
</div><!-- .row -->

<!-- Practice / Users info block -->
<div class="row">
    <!-- Practice INFO -->
    <div class="input-block col-xs-12 col-sm-6" ng-show="practiceSearch" >
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">Practice info:</h3>
            </div>
            <div class="panel-body">
                <div class="form-group">
                    <label>Practice name</label>
                    <input type="text" class="form-control data1" value="{{practiceSearch.name}}" disabled="disabled">
                </div>
                <div class="form-group">
                    <label>Owner</label>
                    <input type="text" class="form-control data1" value="{{practiceSearch.owner.title}} {{practiceSearch.owner.first_name}} {{practiceSearch.owner.last_name}}" disabled="disabled">
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label>Email</label>
                            <input type="text" class="form-control data1" value="{{practiceSearch.owner.email}}" disabled="disabled">
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label>Practice type</label>
                            <input type="text" class="form-control data1" value="{{practiceSearch.practice_type.name}}" disabled="disabled">
                        </div>
                    </div>
                </div>

                <!--Accordion Address-->
                <accordion close-others="false">
                    <accordion-group  heading="{{'Address #' + ($index + 1)}}" ng-repeat="address in practiceSearch.addresses">
                        <div class="row">
                            <div class="col-sm-8">
                                <div class="form-group">
                                    <label>Street</label>
                                    <input type="text" class="form-control data1" value="{{address.street_line_1}}" disabled="disabled">
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label>City</label>
                                    <input type="text" class="form-control data1" value="{{address.city}}" disabled="disabled">
                                </div>
                            </div>
                        </div>

                        <div class="form-group" ng-show="address.street_line_2">
                            <label>Street 2</label>
                            <input type="text" class="form-control data1" value="{{address.street_line_2}}" disabled="disabled">
                        </div>

                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label>Phone</label>
                                    <input type="text" class="form-control data1" value="{{address.phone}}" disabled="disabled">
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>State</label>
                                    <input type="text" class="form-control data1" value="{{address.state}}" disabled="disabled">
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <div class="form-group">
                                    <label>Zip</label>
                                    <input type="text" class="form-control data1" value="{{address.zip}}" disabled="disabled">
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Website</label>
                            <input type="text" class="form-control data1" value="{{address.website}}" disabled="disabled">
                        </div>
                    </accordion-group>
                </accordion><!--Accordion end-->
            </div>
        </div>
    </div>

    <!-- Users INFO -->
    <div class="input-block col-xs-12 col-sm-6" ng-show="practiceUser">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">User info:</h3>
                <div delete-button class="button-block btn-delete">
                    <span class="dlicons-remove"></span> Delete this user? <a ng-click="deleteUser(practiceUser)" class="link-green">Yes</a> | <a  class="link-orange">No</a>
                </div>
                <div ng-click="editDialog(practiceUser)" class="button-block btn-change-password"
                     ng-hide="(practiceUser.first_name === null && practiceUser.last_name === null) || practiceUser.status == 'invited'">
                    <span class="dlicons-pencil" title="Edit user"></span>
                </div>
            </div>
            <div class="panel-body">
                <div class="form-group">
                    <label>Full user name</label>
                    <input type="text" class="form-control data1" value="{{practiceUser.title}} {{practiceUser.first_name}}
                        {{practiceUser.middle_initial}} {{practiceUser.last_name}}" disabled="disabled">
                </div>
                <div class="row">
                    <div class="col-sm-10">
                        <div class="form-group">
                            <label>Email</label>
                            <input type="text" class="form-control data1" value="{{practiceUser.email}}" disabled="disabled">
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label>No login</label>
                            <input type="checkbox" class="checkbox" ng-checked="practiceUser.no_login" disabled="disabled">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Role</label>
                    <input type="text" class="form-control data1" value="{{showFullRole(practiceUser.roles_mask)}}" disabled="disabled">
                </div>
                <div class="form-group invite-link-group" ng-if="practiceUser.status == 'invited'">
                    <label>Invite link</label>
                    <p class="form-control-static">
                        <a href="{{showInviteLink(practiceUser)}}" target="_blank">{{showInviteLink(practiceUser)}}</a>
                    </p>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label>Create</label>
                            <input type="text" class="form-control data1" value="{{practiceUser.created_at | date: 'mediumDate'}}"
                                   disabled="disabled">
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="form-group">
                            <label>Update</label>
                            <input type="text" class="form-control data1" value="{{practiceUser.updated_at | date: 'mediumDate'}}"
                                   disabled="disabled">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div><!-- .row -->
